<script>
export default {
  data() {
    return {
      tplInfos: [
        {
          "id": "4XxixG511AP",
          "svg": "<svg width=\"100%\" height=\"100%\" version=\"1.1\" viewBox=\"0 0 450 300\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><rect x=\"0\" y=\"0\" data-type=\"bg\" fill=\"#FFFFFF\" width=\"100%\" height=\"100%\"></rect><g><rect data-type=\"rect\" x=\"0\" y=\"0\" width=\"452\" height=\"178\" fill=\"#2B2A6F\" rx=\"0\" id=\"fLLJqCpASApQQjdeyvReV\" transform=\"translate(-1,123)\"></rect><g x=\"0\" y=\"0\" id=\"xrynPFVWqbbVNaHXZKWHa\" transform=\"translate(18,25)\"><image href=\"\" data-type=\"logo\" width=\"73\" height=\"74\"></image></g><g id=\"egBtiQwmtUpHFCstZTWCG\" transform=\"translate(105,25)\"><text x=\"0\" y=\"0\" fill=\"#000000\" font-weight=\"bold\" font-style=\"normal\" font-family=\"-apple-system, &quot;Noto Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Nimbus Sans L&quot;, Arial, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Noto Sans CJK SC&quot;, &quot;Source Han Sans SC&quot;, &quot;Source Han Sans CN&quot;, &quot;Microsoft YaHei&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif\" font-size=\"30\" dominant-baseline=\"\" text-anchor=\"\" transform=\"translate(7,0)\"><tspan data-type=\"title\" dy=\"30\" x=\"0\" data-max=\"58\" data-len=\"9\" y=\"0\"></tspan><tspan data-type=\"title-placeholder\" data-max=\"58\" fill=\"transparent\" x=\"0\" y=\"0\" dy=\"30\">十</tspan></text></g><g id=\"gwlqcpcAeFaAcDnoSUYaa\" transform=\"translate(103,76)\"><text x=\"0\" y=\"0\" fill=\"#67717C\" font-weight=\"normal\" font-style=\"normal\" font-family=\"-apple-system, &quot;Noto Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Nimbus Sans L&quot;, Arial, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Noto Sans CJK SC&quot;, &quot;Source Han Sans SC&quot;, &quot;Source Han Sans CN&quot;, &quot;Microsoft YaHei&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif\" font-size=\"20\" dominant-baseline=\"\" text-anchor=\"\" transform=\"translate(7,0)\"><tspan data-type=\"subTitle\" dy=\"20\" x=\"0\" data-max=\"72\" data-len=\"16\" y=\"0\"></tspan><tspan data-type=\"subTitle-placeholder\" data-max=\"72\" fill=\"transparent\" x=\"0\" y=\"0\" dy=\"20\">十</tspan></text></g><g id=\"UoEyLNmLXKDVWFqMuGhaG\" transform=\"translate(17,139)\"><text x=\"0\" y=\"0\" fill=\"#FFFFFF\" font-weight=\"normal\" font-style=\"normal\" font-family=\"-apple-system, &quot;Noto Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Nimbus Sans L&quot;, Arial, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Noto Sans CJK SC&quot;, &quot;Source Han Sans SC&quot;, &quot;Source Han Sans CN&quot;, &quot;Microsoft YaHei&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif\" font-size=\"22\" dominant-baseline=\"\" text-anchor=\"end\" transform=\"translate(-7,0)\"><tspan data-type=\"field\" dy=\"22\" x=\"56.888888888888886%\" data-count=\"4\" data-max=\"57\" data-len=\"12\" y=\"0\"></tspan><tspan data-type=\"field-placeholder4\" data-max=\"57\" data-len=\"12\" fill=\"transparent\" x=\"56.888888888888886%\" y=\"0\" dy=\"22\">十</tspan></text></g><g id=\"XWhEFgXYstcQgzqpVUcPp\" transform=\"translate(16,180)\"><text x=\"0\" y=\"0\" fill=\"#FFFFFF\" font-weight=\"normal\" font-style=\"normal\" font-family=\"-apple-system, &quot;Noto Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Nimbus Sans L&quot;, Arial, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Noto Sans CJK SC&quot;, &quot;Source Han Sans SC&quot;, &quot;Source Han Sans CN&quot;, &quot;Microsoft YaHei&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif\" font-size=\"22\" dominant-baseline=\"middle\" text-anchor=\"middle\" transform=\"translate(128.5,16.5)\"><tspan data-type=\"field\" dy=\"\" x=\"0\" data-count=\"4\" data-max=\"57\" data-len=\"12\" y=\"0\"></tspan><tspan data-type=\"field-placeholder4\" data-max=\"57\" data-len=\"12\" fill=\"transparent\" x=\"0\" y=\"0\">十</tspan></text></g><g id=\"AheeRlzyrcqeEpmiaJEFt\" transform=\"translate(17,220)\"><text x=\"0\" y=\"0\" fill=\"#FFFFFF\" font-weight=\"normal\" font-style=\"normal\" font-family=\"-apple-system, &quot;Noto Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Nimbus Sans L&quot;, Arial, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Noto Sans CJK SC&quot;, &quot;Source Han Sans SC&quot;, &quot;Source Han Sans CN&quot;, &quot;Microsoft YaHei&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif\" font-size=\"22\" dominant-baseline=\"\" text-anchor=\"\" transform=\"translate(7,0)\"><tspan data-type=\"field\" dy=\"22\" x=\"0\" data-count=\"4\" data-max=\"57\" data-len=\"12\" y=\"0\"></tspan><tspan data-type=\"field-placeholder4\" data-max=\"57\" fill=\"transparent\" x=\"0\" y=\"0\" dy=\"22\">十</tspan></text></g><g id=\"HJdUtdYeocBzeWRkpaKAn\" transform=\"translate(17,260)\"><text x=\"0\" y=\"0\" fill=\"#FFFFFF\" font-weight=\"normal\" font-style=\"normal\" font-family=\"-apple-system, &quot;Noto Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Nimbus Sans L&quot;, Arial, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Noto Sans CJK SC&quot;, &quot;Source Han Sans SC&quot;, &quot;Source Han Sans CN&quot;, &quot;Microsoft YaHei&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif\" font-size=\"22\" dominant-baseline=\"\" text-anchor=\"end\" transform=\"translate(-7,0)\"><tspan data-type=\"field\" dy=\"22\" x=\"57.333333333333336%\" data-count=\"4\" data-max=\"57\" data-len=\"12\" y=\"0\"></tspan><tspan data-type=\"field-placeholder4\" data-max=\"57\" data-len=\"12\" fill=\"transparent\" x=\"57.333333333333336%\" y=\"0\" dy=\"22\">十</tspan></text></g><rect data-type=\"rect\" x=\"0\" y=\"0\" width=\"139\" height=\"139\" fill=\"#FFFFFF\" rx=\"6.95\" id=\"EfkYjRenEcpKsfLRhcmaf\" transform=\"translate(289,145)\"></rect><image x=\"0\" y=\"0\" data-type=\"qr\" href=\"\" width=\"129\" height=\"129\" id=\"NgVVujjGecuaKSooUtFPj\" transform=\"translate(294,150)\"></image></g></svg>",
          "defaultColor": "#FFFFFF",
          "defaultWidth": 150,
          "defaultHeight": 100,
          "hasLogo": true,
          "hasTitle": true,
          "hasSubTitle": true,
          "tagCount": 4,
        },
        {
          "id": "4Y1z6ML8AAj",
          "svg": "<svg width=\"100%\" height=\"100%\" version=\"1.1\" viewBox=\"0 0 300 450\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\"><rect x=\"0\" y=\"0\" data-type=\"bg\" fill=\"#FFFFFF\" width=\"100%\" height=\"100%\"></rect><g><rect data-type=\"rect\" x=\"0\" y=\"0\" width=\"302\" height=\"106\" fill=\"#148B64\" rx=\"0\" id=\"wbIFVaECDuTSOVOdwNPIK\" transform=\"translate(-1,-2)\"></rect><image x=\"0\" y=\"0\" data-type=\"qr\" href=\"\" width=\"150\" height=\"150\" id=\"vXVJmDdBazJNABGbFeJKQ\" transform=\"translate(72,118)\"></image><g id=\"KlSHrEKHYayfFPkIPONDc\" transform=\"translate(17,289)\"><text x=\"0\" y=\"0\" fill=\"#000000\" font-weight=\"bold\" font-style=\"normal\" font-family=\"-apple-system, &quot;Noto Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Nimbus Sans L&quot;, Arial, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Noto Sans CJK SC&quot;, &quot;Source Han Sans SC&quot;, &quot;Source Han Sans CN&quot;, &quot;Microsoft YaHei&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif\" font-size=\"30\" dominant-baseline=\"middle\" text-anchor=\"middle\" transform=\"translate(133.5,22.5)\"><tspan data-type=\"title\" dy=\"\" x=\"0\" data-max=\"89\" data-len=\"9\" y=\"0\"></tspan><tspan data-type=\"title-placeholder\" data-max=\"89\" data-len=\"9\" fill=\"transparent\" x=\"0\" y=\"0\">十</tspan></text></g><g id=\"eyUsoShmXXOmFdEIGYlKF\" transform=\"translate(17,350)\"><text x=\"0\" y=\"0\" fill=\"#67717C\" font-weight=\"normal\" font-style=\"normal\" font-family=\"Baskerville, Georgia, &quot;Liberation Serif&quot;, &quot;Kaiti SC&quot;, STKaiti, &quot;AR PL UKai CN&quot;, &quot;AR PL UKai HK&quot;, &quot;AR PL UKai TW&quot;, &quot;AR PL UKai TW MBE&quot;, &quot;AR PL KaitiM GB&quot;, KaiTi, KaiTi_GB2312, DFKai-SB, &quot;TW-Kai&quot;, serif\" font-size=\"17\" dominant-baseline=\"middle\" text-anchor=\"middle\" transform=\"translate(133,12.75)\"><tspan data-type=\"field\" dy=\"\" x=\"0\" data-count=\"3\" data-max=\"89\" data-len=\"16\" y=\"0\"></tspan><tspan data-type=\"field-placeholder3\" data-max=\"89\" data-len=\"16\" fill=\"transparent\" x=\"0\" y=\"0\">十</tspan></text></g><g id=\"DJXjjzZLtqJyWYcXjEbXm\" transform=\"translate(18,384)\"><text x=\"0\" y=\"0\" fill=\"#66383A\" font-weight=\"normal\" font-style=\"normal\" font-family=\"-apple-system, &quot;Noto Sans&quot;, &quot;Helvetica Neue&quot;, Helvetica, &quot;Nimbus Sans L&quot;, Arial, &quot;Liberation Sans&quot;, &quot;PingFang SC&quot;, &quot;Hiragino Sans GB&quot;, &quot;Noto Sans CJK SC&quot;, &quot;Source Han Sans SC&quot;, &quot;Source Han Sans CN&quot;, &quot;Microsoft YaHei&quot;, &quot;Wenquanyi Micro Hei&quot;, &quot;WenQuanYi Zen Hei&quot;, &quot;ST Heiti&quot;, SimHei, &quot;WenQuanYi Zen Hei Sharp&quot;, sans-serif\" font-size=\"17\" dominant-baseline=\"\" text-anchor=\"\" transform=\"translate(7,0)\"><tspan data-type=\"field\" dy=\"17\" x=\"0\" data-count=\"3\" data-max=\"89\" data-len=\"16\" y=\"0\"></tspan><tspan data-type=\"field-placeholder3\" data-max=\"89\" fill=\"transparent\" x=\"0\" y=\"0\" dy=\"17\">十</tspan></text></g><g id=\"NgsKpIvauEEQxeneNCcHT\" transform=\"translate(19,415)\"><text x=\"0\" y=\"0\" fill=\"#2D65B7\" font-weight=\"normal\" font-style=\"normal\" font-family=\"Georgia, &quot;Nimbus Roman No9 L&quot;, &quot;Songti SC&quot;, &quot;Noto Serif CJK SC&quot;, &quot;Source Han Serif SC&quot;, &quot;Source Han Serif CN&quot;, STSong, &quot;AR PL New Sung&quot;, &quot;AR PL SungtiL GB&quot;, NSimSun, SimSun, &quot;TW-Sung&quot;, &quot;WenQuanYi Bitmap Song&quot;, &quot;AR PL UMing CN&quot;, &quot;AR PL UMing HK&quot;, &quot;AR PL UMing TW&quot;, &quot;AR PL UMing TW MBE&quot;, PMingLiU, MingLiU, serif\" font-size=\"17\" dominant-baseline=\"\" text-anchor=\"end\" transform=\"translate(-7,0)\"><tspan data-type=\"field\" dy=\"17\" x=\"88.66666666666667%\" data-count=\"3\" data-max=\"89\" data-len=\"16\" y=\"0\"></tspan><tspan data-type=\"field-placeholder3\" data-max=\"89\" data-len=\"16\" fill=\"transparent\" x=\"88.66666666666667%\" y=\"0\" dy=\"17\">十</tspan></text></g><g x=\"0\" y=\"0\" id=\"YhxHftINCFtjgIkryQodU\" transform=\"translate(30,23)\"><image href=\"\" data-type=\"logo\" width=\"244\" height=\"62\"></image></g></g></svg>",
          "svgDemo": "https://dl-edisk.effio.cn/test/1522796096743817216.svg",
          "defaultColor": "#FFFFFF",
          "defaultWidth": 100,
          "defaultHeight": 150,
          "hasLogo": true,
          "hasTitle": true,
          "hasSubTitle": false,
          "tagCount": 3,
        }
      ],
      tplDatas: [
        {
          "id": "4XvmuiUeC2b",
          "width": 150,
          "height": 100,
          "backgroudColor": "#FFFFFF",
          "logo": "https://pinia.vuejs.org/logo.svg",
          "title": "朱鸿",
          "subTitle": "北包包包包包包包包包包包包包包包包包包包包包包包包",
          "tagFields": [
            "🥶🫠🥲🥸🥶🫠🥲🥲",
            "🫠🥲🥸🥶🫠🥲🥸🥶🫠",
            "🫠🥲🥸🥶🫠🥲🥸🥶",
            "🥲🥸🥶🫠🥲🥸🥶🫠🥲🥸",
          ],
        },
        {
          "id": "4XvmuiUeC2b",
          "width": 100,
          "height": 150,
          "backgroudColor": "#FFFFFF",
          "logo": "https://pinia.vuejs.org/logo.svg",
          "title": "朱鸿",
          "subTitle": "北包包包包包包包包包包包包包包包包包包包包包包包包",
          "tagFields": [
            "🥶🫠🥲🥸🥶🫠🥲🥲",
            "🫠🥲🥸🥶🫠🥲🥸🥶🫠",
            "🫠🥲🥸🥶🫠🥲🥸🥶",
            "🥲🥸🥶🫠🥲🥸🥶🫠🥲🥸",
          ],
        },
      ],
      currentTemplate: 0,
    }
  },
  methods: {
    showFocus(type, index, text) {
      this.$refs.QrCodeBinder.showFocus(type, index, text)
    },
    hiddenFocus() {
      this.$refs.QrCodeBinder.hiddenFocus()
    },
    uploadLogo(e) {
      const file = e.target.files[0]

      if(!file) return

      const blobURL = URL.createObjectURL(file)
      this.tplData.logo = blobURL
    },
  },
  computed: {
    tplInfo() {
      return this.tplInfos[this.currentTemplate]
    },
    tplData() {
      return this.tplDatas[this.currentTemplate]
    },
  },
}
</script>

<template>
  <div class="w-full h-full flex">
    <div class="flex-1 flex justify-center items-center">
      <div :style="{ 'width': `${tplData.width}mm`, 'height': `${tplData.height}mm` }">
        <QrCodeBinder ref="QrCodeBinder" :tplInfo="tplInfo" :tplData="tplData" focusColor="rgba(251, 113, 133, 1)" />
      </div>
    </div>
    <div class="w-420px flex-none border-l p-4 flex flex-col gap-5">
      <label>标签</label>
      <div class="flex justify-start items-center gap-5">
        <input type="radio" name="tpl" v-for="t of tplInfos.length" :key="t" :value="t - 1" v-model="currentTemplate">
      </div>
      <template v-if="tplInfo.hasLogo">
        <label>LOGO</label>
        <input type="file" @change="uploadLogo">
      </template>
      <template v-if="tplInfo.hasTitle">
        <label>标题</label>
        <input @focus="showFocus('title', 0, '标题')" @blur="hiddenFocus" v-model="tplData.title" type="text" class="p-3 rounded text-black outline-none transition focus:(ring-3 ring-rose-400)">
      </template>
      <template v-if="tplInfo.hasSubTitle">
        <label>副标题</label>
        <input @focus="showFocus('subTitle', 0)" @blur="hiddenFocus" v-model="tplData.subTitle" type="text" class="p-3 rounded text-black outline-none transition focus:(ring-3 ring-rose-400)">
      </template>
      <template v-if="tplInfo.tagCount > 0">
        <label>字段</label>
        <input @focus="showFocus('field', i - 1)" @blur="hiddenFocus" v-model="tplData.tagFields[i - 1]" v-for="i of tplInfo.tagCount" :key="i" type="text" class="p-3 rounded text-black outline-none transition focus:(ring-3 ring-rose-400)">
      </template>
    </div>
  </div>
</template>
